{
  "graphlettes": [
    {
      "path": "/user/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-user",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/user.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getByTelegramId",
            "id": "telegramId",
            "query": "{\"payload.telegramId\": \"${id}\"}"
          },
          {
            "name": "getByUsername",
            "id": "username",
            "query": "{\"payload.username\": \"${id}\"}"
          },
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [],
        "resolvers": [
          {
            "name": "messages",
            "id": "id",
            "queryName": "getByUser",
            "url": "http://localhost:3033/message/graph"
          }
        ]
      }
    },
    {
      "path": "/message/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-message",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/message.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getByTelegramId",
            "id": "telegramId",
            "query": "{\"payload.telegramId\": \"${id}\"}"
          },
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByMessageThread",
            "id": "messageThread",
            "query": "{\"payload.messageThread\": \"${id}\"}"
          },
          {
            "name": "getByDate",
            "id": "date",
            "query": "{\"payload.date\": \"${id}\"}"
          },
          {
            "name": "getByUser",
            "id": "id",
            "query": "{\"payload.user_id\": \"${id}\"}"
          },
          {
            "name": "getByChat",
            "id": "id",
            "query": "{\"payload.chat_id\": \"${id}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "chat",
            "id": "chat_id",
            "queryName": "getById",
            "url": "http://localhost:3033/chat/graph"
          },
          {
            "name": "user",
            "id": "user_id",
            "queryName": "getById",
            "url": "http://localhost:3033/user/graph"
          },
          {
            "name": "voices",
            "id": "id",
            "queryName": "getByMessage",
            "url": "http://localhost:3033/voice/graph"
          },
          {
            "name": "documents",
            "id": "id",
            "queryName": "getByMessage",
            "url": "http://localhost:3033/document/graph"
          },
          {
            "name": "audio",
            "id": "id",
            "queryName": "getByMessage",
            "url": "http://localhost:3033/audio/graph"
          },
          {
            "name": "responses",
            "id": "id",
            "queryName": "getByMessage",
            "url": "http://localhost:3033/response/graph"
          }
        ]
      }
    },
    {
      "path": "/audio/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-audio",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/audio.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByMessage",
            "id": "id",
            "query": "{\"payload.message_id\": \"${id}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "message",
            "id": "message_id",
            "queryName": "getById",
            "url": "http://localhost:3033/message/graph"
          }
        ]
      }
    },
    {
      "path": "/document/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-document",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/document.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByMessage",
            "id": "id",
            "query": "{\"payload.message_id\": \"${id}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "message",
            "id": "message_id",
            "queryName": "getById",
            "url": "http://localhost:3033/message/graph"
          }
        ]
      }
    },
    {
      "path": "/voice/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-voice",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/voice.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByMessage",
            "id": "id",
            "query": "{\"payload.message_id\": \"${id}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "message",
            "id": "message_id",
            "queryName": "getById",
            "url": "http://localhost:3033/message/graph"
          }
        ]
      }
    },
    {
      "path": "/chat/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-chat",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/chat.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getByTelegramId",
            "id": "telegramId",
            "query": "{\"payload.telegramId\": \"${id}\"}"
          },
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [],
        "resolvers": [
          {
            "name": "messages",
            "id": "id",
            "queryName": "getByChat",
            "url": "http://localhost:3033/message/graph"
          },
          {
            "name": "chatLocations",
            "id": "id",
            "queryName": "getByChat",
            "url": "http://localhost:3033/chatLocation/graph"
          },
          {
            "name": "chatPermissions",
            "id": "id",
            "queryName": "getByChat",
            "url": "http://localhost:3033/chatPermissions/graph"
          }
        ]
      }
    },
    {
      "path": "/chatpermissions/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-chatpermissions",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/chatpermissions.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByChat",
            "id": "id",
            "query": "{\"payload.chat_id\": \"${id}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "chat",
            "id": "chat_id",
            "queryName": "getById",
            "url": "http://localhost:3033/chat/graph"
          }
        ]
      }
    },
    {
      "path": "/chatlocation/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-chatlocation",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/chatlocation.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByLatLong",
            "id": "lat",
            "query": "{\"payload.latLong_id\": \"${id}\"}"
          },
          {
            "name": "getByChat",
            "id": "id",
            "query": "{\"payload.chat_id\": \"${id}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "chat",
            "id": "chat_id",
            "queryName": "getById",
            "url": "http://localhost:3033/chat/graph"
          }
        ]
      }
    },
    {
      "path": "/fact/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-fact",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/fact.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "findByAnswer",
            "id": "search",
            "query": "{\"payload.yAnswer_id\": \"${id}\"}"
          }
        ],
        "resolvers": []
      }
    },
    {
      "path": "/response/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-response",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/response.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [
          {
            "name": "getByMessage",
            "id": "id",
            "query": "{\"payload.message_id\": \"${id}\"}"
          }
        ],
        "resolvers": [
          {
            "name": "message",
            "id": "message_id",
            "queryName": "getById",
            "url": "http://localhost:3033/message/graph"
          }
        ]
      }
    },
    {
      "path": "/prompt/graph",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-prompt",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/graph/prompt.graphql",
      "dtoConfig": {
        "singletons": [
          {
            "name": "getById",
            "id": "id",
            "query": "{\"id\": \"${id}\"}"
          }
        ],
        "vectors": [],
        "resolvers": [
          {
            "name": "message",
            "id": "message_id",
            "queryName": "getById",
            "url": "http://localhost:3033/message/graph"
          }
        ]
      }
    }
  ],
  "port": 3033,
  "restlettes": [
    {
      "path": "/user/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-user",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/user.schema.json"
    },
    {
      "path": "/message/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-message",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/message.schema.json"
    },
    {
      "path": "/audio/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-audio",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/audio.schema.json"
    },
    {
      "path": "/document/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-document",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/document.schema.json"
    },
    {
      "path": "/voice/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-voice",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/voice.schema.json"
    },
    {
      "path": "/chat/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-chat",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/chat.schema.json"
    },
    {
      "path": "/chatpermissions/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-chatpermissions",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/chatpermissions.schema.json"
    },
    {
      "path": "/chatlocation/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-chatlocation",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/chatlocation.schema.json"
    },
    {
      "path": "/fact/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-fact",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/fact.schema.json"
    },
    {
      "path": "/response/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-response",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/response.schema.json"
    },
    {
      "path": "/prompt/api",
      "mongo": {
        "uri": ${?MONGO_URI},
        "collection": ${?PREFIX}"-"${?ENV}"-prompt",
        "db": ${?PREFIX}"_"${?ENV},
        "options": {
          "directConnection": true
        }
      },
      "schema": "config/json/prompt.schema.json"
    }
  ],
  "url": ${?PLATFORM_URL}
}